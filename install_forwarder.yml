---
- name: install and configure splunk forwarder
  hosts: localhost
  connection: local
  gather_facts: false


  tasks:

    - name: install programs
      dnf:
        name: 
          - curl
          - wget
          - nmap
          - 
        state: present

    - name: download splunk forwarder
      get_url:
        url: https://d7wz6hmoaavd0.cloudfront.net/products/universalforwarder/releases/8.2.1/linux/splunkforwarder-8.2.1-ddff1c41e5cf-linux-2.6-x86_64.rpm
        dest: /tmp/

    - name: install local rpm
      dnf:
        name: /tmp/splunkforwarder-8.2.1-ddff1c41e5cf-linux-2.6-x86_64.rpm
        state: present

    - name: Create a symbolic link
      ansible.builtin.file:
        src: /opt/splunkforwarder/bin/splunk
        dest: /usr/bin/splunk
        state: link
  
    